<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Cellphone DB utility — CellPhoneDB_analyse • Platypus</title><!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png"><link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png"><link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png"><link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png"><link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png"><link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png"><!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.4.0/yeti/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous"><script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css"><script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet"><script src="../pkgdown.js"></script><meta property="og:title" content="Cellphone DB utility — CellPhoneDB_analyse"><meta property="og:description" content='Function to set up the data so that it can be read and processed by CellPhoneDB, which saves the results of the analysis in a directory "out" and adds them in a new vgm (output of VDJ_GEX_matrix function) list item (CellPhoneDB). Needs Python to be installed in the computer. Running time can take some minutes. Depending on the state of the connection to ensembl and whether this is down, the function might not work if it needs to convert the genes identity. In these cases, try at some other moment and the connection should hopefully be back.
!!! In case the python call does is not executed, please refer to the parameter "pre.code" !!!'><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body data-spy="scroll" data-target="#toc">
    

    <div class="container template-reference-topic">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">Platypus</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">3.4.1</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav"><li>
  <a href="../index.html">
    <span class="fa fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../articles/quickstart.html">Get started</a>
</li>
<li>
  <a href="../vignette_index.html">Vignettes</a>
</li>
<li>
  <a href="../PlatypusDB_index.html">PlatypusDB</a>
</li>
<li>
  <a href="../reference/index.html">Functions</a>
</li>
<li>
  <a href="../news/index.html">News</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Other Packages
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu"><li>
      <a href="https://immunesim.readthedocs.io/en/latest/" class="external-link">ImmuneSIM</a>
    </li>
  </ul></li>
<li>
  <a href="../cute_monotremes.html">Cute Monotremes</a>
</li>
      </ul><ul class="nav navbar-nav navbar-right"><li>
  <a href="https://twitter.com/alexyermanos" class="external-link">
    <span class="fa fa-twitter"></span>
     
  </a>
</li>
<li>
  <a href="https://twitter.com/KreineVic" class="external-link">
    <span class="fa fa-twitter"></span>
     
  </a>
</li>
<li>
  <a href="https://github.com/alexyermanos/Platypus" class="external-link">
    <span class="fa fa-github"></span>
     
  </a>
</li>
      </ul></div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Cellphone DB utility</h1>
    <small class="dont-index">Source: <a href="https://github.com/alexyermanos/Platypus/tree/masterR/CellPhoneDB_analyse.R" class="external-link"><code>R/CellPhoneDB_analyse.R</code></a></small>
    <div class="hidden name"><code>CellPhoneDB_analyse.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>Function to set up the data so that it can be read and processed by CellPhoneDB, which saves the results of the analysis in a directory "out" and adds them in a new vgm (output of VDJ_GEX_matrix function) list item (CellPhoneDB). Needs Python to be installed in the computer. Running time can take some minutes. Depending on the state of the connection to ensembl and whether this is down, the function might not work if it needs to convert the genes identity. In these cases, try at some other moment and the connection should hopefully be back.
!!! In case the python call does is not executed, please refer to the parameter "pre.code" !!!</p>
    </div>

    <div id="ref-usage">
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">CellPhoneDB_analyse</span><span class="op">(</span></span>
<span>  <span class="va">vgm.input</span>,</span>
<span>  <span class="va">column</span>,</span>
<span>  <span class="va">groups</span>,</span>
<span>  <span class="va">organism</span>,</span>
<span>  <span class="va">gene.id</span>,</span>
<span>  <span class="va">analysis.method</span>,</span>
<span>  <span class="va">project.name</span>,</span>
<span>  <span class="va">iterations</span>,</span>
<span>  <span class="va">threshold</span>,</span>
<span>  <span class="va">result.precision</span>,</span>
<span>  <span class="va">subsampling</span>,</span>
<span>  <span class="va">subsampling.num.pc</span>,</span>
<span>  <span class="va">subsampling.num.cells</span>,</span>
<span>  <span class="va">subsampling.log</span>,</span>
<span>  <span class="va">pvalue</span>,</span>
<span>  <span class="va">debug.seed</span>,</span>
<span>  <span class="va">threads</span>,</span>
<span>  <span class="va">install.cellphonedb</span>,</span>
<span>  <span class="va">pre.code</span>,</span>
<span>  <span class="va">platypus.version</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div id="arguments">
    <h2>Arguments</h2>
    <dl><dt>vgm.input</dt>
<dd><p>Output of the VDJ_GEX_matrix function</p></dd>


<dt>column</dt>
<dd><p>Character vector. Mandatory. Column name of VDJ_GEX_matrix[[2]] where the groups to be tested for interactions are located</p></dd>


<dt>groups</dt>
<dd><p>Strings vector. Mandatory. Vector with groups of the indicated column to be compared.</p></dd>


<dt>organism</dt>
<dd><p>Character vector. Defaults to "human". If == "mouse" the function converts the gene's mouse names into the human ones.</p></dd>


<dt>gene.id</dt>
<dd><p>Character vector. Defaults to "ensembl". Possible arguments: "ensembl" , "hgnc_symbol", "gene_name". Indicates the gene ID used by CellPhoneDB during the analysis. CellPhoneDB specific method argument.</p></dd>


<dt>analysis.method</dt>
<dd><p>Character vector. Defaults to "statistical_analysis" Possible arguments: "statistical_analysis". CellPhoneDB is developing also "degs_analysis" method, which will be included among the possible arguments once released. Indicates the analysis method used by CellPhoneDB. CellPhoneDB specific method argument.</p></dd>


<dt>project.name</dt>
<dd><p>Character vector. Defaults to NULL. If a name is given by the user, a subfolder with this name is created in the output folder. CellPhoneDB specific method argument.</p></dd>


<dt>iterations</dt>
<dd><p>Numerical. Defaults to 1000. Number of iterations for the statistical analysis. CellPhoneDB specific method argument.</p></dd>


<dt>threshold</dt>
<dd><p>Numerical. By defaults not specified. % of cells expressing the specific ligand/receptor. Range: 0&lt;= threshold &lt;=1.</p></dd>


<dt>result.precision</dt>
<dd><p>Numerical. Defaults to 3. Number of decimal digits in results. CellPhoneDB specific method argument.</p></dd>


<dt>subsampling</dt>
<dd><p>Logical. Defaults to FALSE. If set to TRUE it enables subsampling. CellPhoneDB specific method argument.</p></dd>


<dt>subsampling.num.pc</dt>
<dd><p>Numerical. Defaults to 100, if subsampling == TRUE. Number of PCs to use. CellPhoneDB specific method argument.</p></dd>


<dt>subsampling.num.cells</dt>
<dd><p>Numerical. Defaults to 1/3 of cells, if subsampling == TRUE. Number of cells to subsample. CellPhoneDB specific method argument.</p></dd>


<dt>subsampling.log</dt>
<dd><p>Logical. No default, mandatory when subsampling. Enables subsampling log1p for non log-transformed data inputs. CellPhoneDB specific method argument.</p></dd>


<dt>pvalue</dt>
<dd><p>Numerical. Defaults to 0.05. P-value threshold. CellPhoneDB specific statistical method argument.</p></dd>


<dt>debug.seed</dt>
<dd><p>Numerical. Deafults to -1. Debug random seed. To disable it use a value &gt;=0. CellPhoneDB specific statistical method argument</p></dd>


<dt>threads</dt>
<dd><p>Numerical. Defaults to -1. Number of threads to use (needs to be &gt;=1). CellPhoneDB specific statistical method argument.</p></dd>


<dt>install.cellphonedb</dt>
<dd><p>Logical. Defaults to TRUE. Installs the CellPhoneDB Python package if set ==TRUE.</p></dd>


<dt>pre.code</dt>
<dd><p>Character string. One command line or multiple command lines separated by " &amp;&amp; " of code to execute in the console before cellphonedb is called. In case Cellphonedb is installed within a Conda enviroment (highly recommended), set this to "conda activate MyEnviroment", "activate MyEnviroment" or "conda init cmd.exe &amp;&amp; activate MyEnviroment" depending on your Conda installation.</p></dd>


<dt>platypus.version</dt>
<dd><p>This function works with "v3" only, there is no need to set this parameter</p></dd>

</dl></div>
    <div id="value">
    <h2>Value</h2>
    

<p>VDJ_GEX_matrix object with additional list item (VDJ_GEX_matrix[[10]]), containing results and plots of CellPhoneDB analysis. Saves in the directory the input files, results and plots of CellPhoneDB analysis.</p>
    </div>

    <div id="ref-examples">
    <h2>Examples</h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="cn">FALSE</span><span class="op">)</span> <span class="op">{</span></span></span>
<span class="r-in"><span><span class="va">vgm_cellphonedb</span><span class="op">&lt;-</span><span class="fu">CellPhoneDB_analyse</span><span class="op">(</span>vgm.input<span class="op">=</span><span class="va">vgm_m</span>,</span></span>
<span class="r-in"><span>organism<span class="op">=</span><span class="st">"mouse"</span>, groups<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">3</span>,<span class="fl">6</span>,<span class="fl">9</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>gene.id<span class="op">=</span><span class="st">"ensembl"</span>,</span></span>
<span class="r-in"><span>analysis.method<span class="op">=</span> <span class="st">"statistical_analysis"</span>,</span></span>
<span class="r-in"><span>install.cellphonedb <span class="op">=</span> <span class="cn">FALSE</span>,</span></span>
<span class="r-in"><span>subsampling<span class="op">=</span> <span class="cn">TRUE</span>,</span></span>
<span class="r-in"><span>subsampling.num.pc<span class="op">=</span><span class="fl">100</span>,</span></span>
<span class="r-in"><span>subsampling.num.cells<span class="op">=</span><span class="fl">70</span>,</span></span>
<span class="r-in"><span>subsampling.log<span class="op">=</span><span class="cn">TRUE</span>,</span></span>
<span class="r-in"><span>project.name <span class="op">=</span> <span class="st">"test"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">}</span></span></span>
</code></pre></div>
    </div>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top"><h2 data-toc-skip>Contents</h2>
    </nav></div>
</div>


      <footer><div class="copyright">
  <p></p><p>Developed by Alexander Yermanos.</p>
</div>

<div class="pkgdown">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.6.</p>
</div>

      </footer></div>

  


  

  </body></html>

