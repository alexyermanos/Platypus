<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Loads and saves RData objects from the PlatypusDB — PlatypusDB_fetch • Platypus</title><!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png"><link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png"><link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png"><link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png"><link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png"><link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png"><!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.4.0/yeti/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous"><script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css"><script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet"><script src="../pkgdown.js"></script><meta property="og:title" content="Loads and saves RData objects from the PlatypusDB — PlatypusDB_fetch"><meta property="og:description" content="Loads and saves RData objects from the PlatypusDB"><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body data-spy="scroll" data-target="#toc">
    

    <div class="container template-reference-topic">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">Platypus</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">3.3.3</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav"><li>
  <a href="../index.html">
    <span class="fa fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../articles/quickstart.html">Get started</a>
</li>
<li>
  <a href="../vignette_index.html">Vignettes</a>
</li>
<li>
  <a href="../PlatypusDB_index.html">PlatypusDB</a>
</li>
<li>
  <a href="../reference/index.html">Functions</a>
</li>
<li>
  <a href="../news/index.html">News</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Other Packages
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu"><li>
      <a href="https://immunesim.readthedocs.io/en/latest/" class="external-link">ImmuneSIM</a>
    </li>
  </ul></li>
<li>
  <a href="../cute_monotremes.html">Cute Monotremes</a>
</li>
      </ul><ul class="nav navbar-nav navbar-right"><li>
  <a href="https://twitter.com/alexyermanos" class="external-link">
    <span class="fa fa-twitter"></span>
     
  </a>
</li>
<li>
  <a href="https://twitter.com/KreineVic" class="external-link">
    <span class="fa fa-twitter"></span>
     
  </a>
</li>
<li>
  <a href="https://github.com/alexyermanos/Platypus" class="external-link">
    <span class="fa fa-github"></span>
     
  </a>
</li>
      </ul></div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Loads and saves RData objects from the PlatypusDB</h1>
    <small class="dont-index">Source: <a href="https://github.com/alexyermanos/Platypus/tree/masterR/PlatypusDB_fetch.R" class="external-link"><code>R/PlatypusDB_fetch.R</code></a></small>
    <div class="hidden name"><code>PlatypusDB_fetch.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>Loads and saves RData objects from the PlatypusDB</p>
    </div>

    <div id="ref-usage">
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="fu">PlatypusDB_fetch</span><span class="op">(</span>
  <span class="va">PlatypusDB.links</span>,
  <span class="va">save.to.disk</span>,
  <span class="va">load.to.enviroment</span>,
  <span class="va">load.to.list</span>,
  <span class="va">path.to.save</span>,
  <span class="va">combine.objects</span>
<span class="op">)</span></code></pre></div>
    </div>

    <div id="arguments">
    <h2>Arguments</h2>
    <dl><dt>PlatypusDB.links</dt>
<dd><p>Character vector. One or more links to files in the PlatypusDB. Links are constructed as follows: "%Project id%/%sample_id%/%filetype%". Any of the three can be "ALL", to download all files fitting the other link elements. If %filetype% is gexVGM, vdjVGM or metadata, %sample_id% needs to be "ALL", as these are elements which are not divided by sample. See examples for clarification. See last example on how to download AIRR compliant data. Feature Barcode (FB) data will be downloaded both for GEX and VDJ if present and does not need to be specified in the path</p></dd>
<dt>save.to.disk</dt>
<dd><p>Boolean. Defaults to FALSE. Whether to save downloaded files individually to the directory specified in path.to.save</p></dd>
<dt>load.to.enviroment</dt>
<dd><p>Boolean. Defaults to TRUE. Whether to load objects directly into the current .GlobalEnv. An array of the names of the loaded objects will be returned. !Be aware of RAM limitations of your machine when downloading multiple large files.</p></dd>
<dt>load.to.list</dt>
<dd><p>Boolean. Defaults to FALSE. Whether to return loaded objects as a list. !Be aware of RAM limitations of your machine when downloading multiple large files.</p></dd>
<dt>path.to.save</dt>
<dd><p>System path to save files to.</p></dd>
<dt>combine.objects</dt>
<dd><p>Boolean. Defaults to TRUE. Whether to combine objects if appropriate. e.g. VDJ and GEX RData objects for a sample are saved as two independent objects and downloaded as such, to allow for flexibility. If combine.objects is set to TRUE, the function will coerce RData objects of each loaded sample or of each loaded VDJ_GEX_matrix appropriately. Combined input of VDJ and GEX Rdata objects can be directly supplied to the VDJ_GEX_matrix function.</p></dd>
</dl></div>
    <div id="value">
    <h2>Value</h2>
    <p>A list of loaded project files as R objects if load.to.list = T or a name of these object loaded to the enviroment if load.to.enviroment = T.</p>
    </div>

    <div id="ref-examples">
    <h2>Examples</h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span class="co"># \donttest{</span></span>
<span class="r-in"></span>
<span class="r-in"><span class="co">#Get a list of available projects by name</span></span>
<span class="r-in"><span class="fu"><a href="https://rdrr.io/r/base/names.html" class="external-link">names</a></span><span class="op">(</span><span class="fu"><a href="PlatypusDB_list_projects.html">PlatypusDB_list_projects</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [1] "agrafiotis2021a"     "horns2020a"          "khatun2019a"        </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [4] "kreiner2021a"        "kreiner2021b"        "kuhn2021a"          </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [7] "mathew2021a"         "merkenschlager2021a" "neumeier2021a"      </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [10] "neumeier2021b"       "sandu2021a"          "shlesinger2022a"    </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [13] "shlesinger2022b"     "shlesinger2022c"     "yermanos2021a"      </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [16] "yermanos2021b"       "yermanos2022a"       "yermanos2022b"      </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [19] "yermanos2022c"       "yewdell2021a"        "yost2019"           </span>
<span class="r-in"></span>
<span class="r-in"><span class="co">#Load the VDJ_GEX_matrix of a project as an object and</span></span>
<span class="r-in"><span class="co">#also save it to disk for later.</span></span>
<span class="r-in"><span class="co">#This will download the VDJ and GEX part of the VDJ_GEX_matrix and combine</span></span>
<span class="r-in"><span class="fu">PlatypusDB_fetch</span><span class="op">(</span>PlatypusDB.links <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Kuhn2021a//ALL"</span><span class="op">)</span></span>
<span class="r-in">,save.to.disk <span class="op">=</span> <span class="cn">FALSE</span>,load.to.enviroment <span class="op">=</span> <span class="cn">TRUE</span>, load.to.list <span class="op">=</span> <span class="cn">FALSE</span></span>
<span class="r-in">, combine.object <span class="op">=</span> <span class="cn">TRUE</span>,path.to.save <span class="op">=</span> <span class="st">"/Downloads"</span><span class="op">)</span></span>
<span class="r-err co"><span class="r-pr">#&gt;</span> <span class="error">Error in PlatypusDB_fetch(PlatypusDB.links = c("Kuhn2021a//ALL"), save.to.disk = FALSE,     load.to.enviroment = TRUE, load.to.list = FALSE, combine.object = TRUE,     path.to.save = "/Downloads"):</span> One or more selected project ids were not present on the PlatypusDB. Please revise project id inputs</span>
<span class="r-in"></span>
<span class="r-in"><span class="co">#Load VDJ dataframe of the VDJ GEX matrix for all samples of one project</span></span>
<span class="r-in"><span class="va">loaded_list</span> <span class="op">&lt;-</span> <span class="fu">PlatypusDB_fetch</span><span class="op">(</span>PlatypusDB.links <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Kuhn2021a//VDJmatrix"</span><span class="op">)</span></span>
<span class="r-in">,save.to.disk <span class="op">=</span> <span class="cn">FALSE</span>,load.to.enviroment <span class="op">=</span> <span class="cn">FALSE</span>, load.to.list <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span class="r-err co"><span class="r-pr">#&gt;</span> <span class="error">Error in PlatypusDB_fetch(PlatypusDB.links = c("Kuhn2021a//VDJmatrix"),     save.to.disk = FALSE, load.to.enviroment = FALSE, load.to.list = TRUE):</span> One or more selected project ids were not present on the PlatypusDB. Please revise project id inputs</span>
<span class="r-in"></span>
<span class="r-in"><span class="co">#Load the VDJ and GEX RData of 2 samples from</span></span>
<span class="r-in"><span class="co">#2 different projects which can be directly passed</span></span>
<span class="r-in"><span class="co">#on to the VDJ_GEX_matrix function to integrate</span></span>
<span class="r-in"><span class="co">#downloaded_objects &lt;- PlatypusDB_fetch(</span></span>
<span class="r-in"><span class="co">#PlatypusDB.links = c("Project1/s1/ALL", "Project1/s2/ALL")</span></span>
<span class="r-in"><span class="co">#,save.to.disk = FALSE,load.to.enviroment = FALSE, load.to.list = TRUE</span></span>
<span class="r-in"><span class="co">#, combine.objects = TRUE)</span></span>
<span class="r-in"></span>
<span class="r-in"><span class="co">#integrated_samples &lt;- VDJ_GEX_matrix_DB(data.in = downloaded_objects)</span></span>
<span class="r-in"></span>
<span class="r-in"><span class="co">#Download metadata objects for projects</span></span>
<span class="r-in"><span class="va">list_of_metadata_tables</span> <span class="op">&lt;-</span> <span class="fu">PlatypusDB_fetch</span><span class="op">(</span></span>
<span class="r-in">PlatypusDB.links <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Kuhn2021a//metadata"</span><span class="op">)</span></span>
<span class="r-in">,save.to.disk <span class="op">=</span> <span class="cn">FALSE</span>,load.to.enviroment <span class="op">=</span> <span class="cn">FALSE</span>, load.to.list <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span class="r-err co"><span class="r-pr">#&gt;</span> <span class="error">Error in PlatypusDB_fetch(PlatypusDB.links = c("Kuhn2021a//metadata"),     save.to.disk = FALSE, load.to.enviroment = FALSE, load.to.list = TRUE):</span> One or more selected project ids were not present on the PlatypusDB. Please revise project id inputs</span>
<span class="r-in"></span>
<span class="r-in"><span class="co">#Dowload of airr_rearrangement.tsv</span></span>
<span class="r-in"><span class="co">#Load VDJ.RData into a list</span></span>
<span class="r-in"><span class="co">#downloaded_objects &lt;- PlatypusDB_fetch(</span></span>
<span class="r-in"><span class="co">#PlatypusDB.links = c("Project1/ALL/VDJ.RData"),save.to.disk = FALSE</span></span>
<span class="r-in"><span class="co">#,load.to.enviroment = FALSE, load.to.list = TRUE)</span></span>
<span class="r-in"></span>
<span class="r-in"><span class="co">#Extract airr_rearrangement table for sample 1</span></span>
<span class="r-in"><span class="co">#airr_rearrangement &lt;- downloaded_objects[[1]][[1]][[6]]</span></span>
<span class="r-in"><span class="co">#Index hierarchy: Sample, VDJ or GEX, VDJ element</span></span>
<span class="r-in"></span>
<span class="r-in"><span class="co">#Save for import to AIRR compatible pipeline</span></span>
<span class="r-in"><span class="co">#write.table(airr_rearrangement, file = "airr_rearrangement_s1.tsv", sep='\t',</span></span>
<span class="r-in"><span class="co">#row.names = FALSE, quote=FALSE)</span></span>
<span class="r-in"></span>
<span class="r-in"><span class="co"># }</span></span>
<span class="r-in"></span>
</code></pre></div>
    </div>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top"><h2 data-toc-skip>Contents</h2>
    </nav></div>
</div>


      <footer><div class="copyright">
  <p></p><p>Developed by Alexander Yermanos.</p>
</div>

<div class="pkgdown">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a>
2.0.2.</p>
</div>

      </footer></div>

  


  

  </body></html>

